name: Auto Update Profile
on:
  schedule:
    - cron: '0 0 * * *'  # DiÃ¡rio Ã  meia-noite UTC
  workflow_dispatch:  # Para rodar manual
permissions:
  contents: write  # Permite push
jobs:
  update-profile:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4  # Atualize pra v4 (mais estÃ¡vel)
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
      - name: Set up Python  # Se precisar do script Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'
      - name: Update profile
        run: |
          # Rode o Python se existir
          if [ -f "update_profile.py" ]; then
            python update_profile.py
          fi
          
          # Cria dir se necessÃ¡rio (mas pro profile, use raiz)
          mkdir -p .github/profile  # Opcional, se quiser manter
          
          # Append na RAIZ (README.md principal)
          echo "Stats updated on $(date '+%d/%m/%Y Ã s %H:%M UTC')" >> README.md
          
          # Git setup
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          
          # Add e commit sÃ³ se mudou
          git add README.md
          if git diff --staged --quiet; then
            echo "Sem mudanÃ§as â€” pulando commit."
          else
            git commit -m "ðŸ”„ Auto-update profile with latest info"
            git push
          fi
